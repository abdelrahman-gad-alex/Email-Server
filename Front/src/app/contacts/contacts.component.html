<app-mainbar></app-mainbar>

<section class="main-container" style="display: block">
    <div class="flex-container">
         
      <app-sidebar></app-sidebar>
          <main class="main-content">
            <div class="shortcuts" >
              <button mat-button [matMenuTriggerFor]="operations">Operations</button>
<mat-menu #operations="matMenu">
  <button mat-menu-item [matMenuTriggerFor]="sortby">Sort by</button>
  <button mat-menu-item [matMenuTriggerFor]="filterby">Filter by</button>
  <button mat-menu-item [matMenuTriggerFor]="searchby">Search by</button>
  <button mat-menu-item (click)="deleteSelect()">Remove</button>
  <button mat-menu-item (click)="moveClick()" [disabled]="fileIn=='allMails'">Move</button>
</mat-menu>

<mat-menu #sortby="matMenu">
  <button mat-menu-item [matMenuTriggerFor]="to" [disabled]="fileIn=='inbox'">To</button>
  <button mat-menu-item [matMenuTriggerFor]="from" [disabled]="fileIn=='sent'">From</button>
  <button mat-menu-item [matMenuTriggerFor]="importance">Importance</button>
  <button mat-menu-item [matMenuTriggerFor]="subject">Subject</button>
  <button mat-menu-item [matMenuTriggerFor]="emailcontent">Email Content</button>
  <button mat-menu-item [matMenuTriggerFor]="attachment">Attachment</button>
  <button mat-menu-item [matMenuTriggerFor]="time">Time</button>
</mat-menu>

<mat-menu #filterby="matMenu">
  <button mat-menu-item [disabled]="fileIn=='sent'">From</button>
  <button mat-menu-item [disabled]="fileIn=='inbox'">To</button>
  <button mat-menu-item>Importance</button>
  <button mat-menu-item>Subject</button>
  <button mat-menu-item>Email content</button>
  <button mat-menu-item >Attachment</button>
  <button mat-menu-item >Time</button>
</mat-menu>

<mat-menu #searchby="matMenu">
  <button mat-menu-item [disabled]="fileIn=='sent'" (click)="searchClick('from')">From</button>
  <button mat-menu-item [disabled]="fileIn=='inbox'" (click)="searchClick('to')">To</button>
  <button mat-menu-item (click)="searchClick('importance')">Importance</button>
  <button mat-menu-item (click)="searchClick('subject')">Subject</button>
  <button mat-menu-item (click)="searchClick('emailcontent')">Email content</button>
  <button mat-menu-item (click)="searchClick('attachment')">Attachment</button>
  <button mat-menu-item (click)="searchClick('time')">Time</button>
</mat-menu>


<mat-menu #to="matMenu">
  <button mat-menu-item (click)="sortClick('to', 'asc')">ASC</button>
  <button mat-menu-item (click)="sortClick('to', 'dsc')">DSC</button>
</mat-menu>

<mat-menu #from="matMenu">
  <button mat-menu-item (click)="sortClick('from', 'asc')">ASC</button>
  <button mat-menu-item (click)="sortClick('from', 'dsc')">DSC</button>
</mat-menu>
<mat-menu #importance="matMenu">
  <button mat-menu-item (click)="sortClick('importance', 'asc')">ASC</button>
  <button mat-menu-item (click)="sortClick('importance', 'dsc')">DSC</button>
</mat-menu>
<mat-menu #emailcontent="matMenu">
  <button mat-menu-item (click)="sortClick('emailcontent', 'asc')">ASC</button>
  <button mat-menu-item (click)="sortClick('emailcontent', 'dsc')">DSC</button>
</mat-menu>
<mat-menu #subject="matMenu">
  <button mat-menu-item (click)="sortClick('subject', 'asc')">ASC</button>
  <button mat-menu-item (click)="sortClick('subject', 'dsc')">DSC</button>
</mat-menu>
<mat-menu #attachment="matMenu">
  <button mat-menu-item (click)="sortClick('attachment', 'asc')">ASC</button>
  <button mat-menu-item (click)="sortClick('attachment', 'dsc')">DSC</button>
</mat-menu>
<mat-menu #time="matMenu">
  <button mat-menu-item (click)="sortClick('time', 'asc')">ASC</button>
  <button mat-menu-item (click)="sortClick('time', 'dsc')">DSC</button>
</mat-menu>
<div id="textDiv1" >
<input type="text" id="firstText" placeholder="Key" [(ngModel)]="keyText">
</div>
<div id="textDiv2">
  <input type="text" id="secondText" placeholder="Folder Name" [(ngModel)]="foldText">
</div>
<div id="butDiv">
<button mat-stroked-button color="primary" (click)="operButClick()">Perfom Operation</button>
</div>         
</div>

        <!--/////////////////////////////-->
      <div class="accodion"id ="accordion">
        <div *ngFor ="let contact of contacts; let i = index" >
          <div class="mail-list" data-bs-toggle="collapse" attr.href="#{{'contact' + i}}" data-bs-parent="#accordion" aria-expanded="false" (click)="update(i)">
            <div class="mail-icons" >
              <h4 class="title">{{contact.name}}</h4>
            </div>
          </div>
          <div *ngFor ="let mail of contact.mail" >
            <div class="collapse" id="{{ 'contact' + i }}" data-bs-parent="#accordion">
               <div class="card card-body" (click)="sendMail(mail)">
                {{mail}}
              </div>
            </div>
          </div>
          <div class="card card-body collapse "id="{{ 'contact' + i }}" data-bs-parent="#accordion" >
            Add Another Mail
            <input [(ngModel)]="newContactMail" (keyup.enter)="onEnter()" >
          </div>
        </div>
      </div>
        
        <!--/////////////////////////////-->
        <!--/////////////////////////////-->
        
        
        </main>

        <aside class="navigation flex-container main-container"style="display: block">
          <div class="FOLDER">
              <div class="btn">
              <a (click)="showAdd()"><img alt ="add" src="./assets/img/add.webp">
                      <p>Add Contact</p>
              </a>
              </div>
          </div>
          <div class="ncontact" id="ncontact">
            <input id="cnameI" [(ngModel)]="newContactName" placeholder="Enter The contact Name" >
            <input id="cemailI" [(ngModel)]="newContactMail" placeholder="Enter contact's Mail" >  
          </div>
              <div class="compose" id="cnameBTN2">
              <div class="btn">
                <a (click)="add()"><img alt ="add" src="./assets/img/add.webp">
                    <p>OK </p>
                </a>
                </div>
          </div>
          <div class="FOLDER">
              <div class="btn">
              <a (click)="showEdit()"><img alt ="add" src="./assets/img/rename.png">
                  <p>Edit Contact</p>
              </a>
              </div>
          </div>
          <input value="{{editName}}" [(ngModel)]="editName" id ="editName" style="display: none;">
          <div *ngFor= "let mail of arr; let i = index;trackBy:trackByIdx">
            <input value = "{{mail}}"  [(ngModel)]="arr[i]" id ="{{ 'mail' + i }}" style="display: none;">
          </div>



          <div class="compose" id="cnameBTN3">
              <div class="btn">
              <a (click)="edit()"><img alt ="add" src="./assets/img/rename.png">
                  <p>OK </p>
              </a>
              </div>
          </div>    
              <div class="FOLDER">
              <div class="btn">
              <a (click)="delete()"><img alt ="add" src="./assets/img/delete.png">
                  <p>Delate Contact</p>
              </a>
              </div>
          </div>
      
      </aside>
      


      </div>
  </section>
  